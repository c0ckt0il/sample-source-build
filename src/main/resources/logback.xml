<configuration>

    <!-- OpenTelemetry Appender -->
    <appender name="OpenTelemetry"
              class="io.opentelemetry.instrumentation.logback.appender.v1_0.OpenTelemetryAppender">
    </appender>

    <!-- Console Appender (stdout, JSON 포맷) -->
    <appender name="JSON_CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
            <providers>
                <!-- timestamp -->
                <timestamp>
                    <timeZone>UTC</timeZone>
                </timestamp>

                <!-- log level -->
                <logLevel/>

                <!-- thread -->
                <threadName/>

                <!-- logger name -->
                <loggerName/>

                <!-- message -->
                <message/>

                <!-- stack trace -->
                <stackTrace/>
            </providers>
        </encoder>
    </appender>

    <!-- 특정 로거 (OTLP: 애플리케이션 로그만) -->
    <logger name="OTLP" additivity="false" level="INFO">
        <appender-ref ref="OpenTelemetry"/>
    </logger>

    <!-- 전체(root): JSON 로그로 출력 -->
    <root level="INFO">
        <appender-ref ref="JSON_CONSOLE"/>
    </root>

</configuration>
